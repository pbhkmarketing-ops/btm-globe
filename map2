<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>Born to Meet â€“ Coordinate Globe</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">



  <!-- CesiumJS CSS -->

  <link

    href="https://unpkg.com/cesium@1.123.0/Build/Cesium/Widgets/widgets.css"

    rel="stylesheet"

  />



  <style>

    html, body, #cesiumContainer {

      margin: 0;

      padding: 0;

      width: 100%;

      height: 100%;

      overflow: hidden;

      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",

        sans-serif;

    }



    /* åº§æ¨™é¡¯ç¤ºå°é¢æ¿ */

    #coordPanel {

      position: absolute;

      left: 50%;

      bottom: 20px;

      transform: translateX(-50%);

      padding: 10px 14px;

      background: rgba(0, 0, 0, 0.55);

      color: #fff;

      font-size: 14px;

      border-radius: 999px;

      backdrop-filter: blur(8px);

      display: flex;

      gap: 8px;

      align-items: center;

      z-index: 10;

    }



    #coordPanel span.label {

      opacity: 0.7;

    }



    #coordPanel code {

      font-family: Menlo, Consolas, monospace;

      font-size: 13px;

    }

  </style>

</head>

<body>

  <div id="cesiumContainer"></div>



  <!-- åº§æ¨™é¡¯ç¤º -->

  <div id="coordPanel">

    <span class="label">Selected:</span>

    <code id="coordText">Click on the globe to get coordinates</code>

  </div>



  <!-- CesiumJS Script -->

  <script src="https://unpkg.com/cesium@1.123.0/Build/Cesium/Cesium.js"></script>

  <script>

    // âœ… è¨­å®š Cesium ion Tokenï¼ˆå» cesium.com å…è²»è¨»å†Šä¸€å€‹ï¼‰

    Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhNDY5NjU4NS1lZGIxLTQzMzctYmE2Zi1hYWFkMmVmYzFjZTIiLCJpZCI6MzY1MTkwLCJpYXQiOjE3NjQ0ODQ2Nzh9.B_gMoVxb53Y_-tjzZcF-GK3FrVyaFTaPPrrmcwjJMSE";



    // âœ… å»ºç«‹ Viewer

    const viewer = new Cesium.Viewer("cesiumContainer", {

      // é—œæ‰ä¸€äº›å…§å»º UIï¼Œä¿ç•™ä¹¾æ·¨ç•«é¢

      animation: false,

      timeline: false,

      geocoder: false,

      homeButton: true,

      sceneModePicker: false,

      baseLayerPicker: true,

      navigationHelpButton: false,

      fullscreenButton: false,

      infoBox: false,

      selectionIndicator: false

    });



    // é¸ç”¨æ¯”è¼ƒåƒ Google Earth çš„åŸºæœ¬åº•åœ–

    viewer.scene.globe.depthTestAgainstTerrain = true;



    const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);

    const coordTextEl = document.getElementById("coordText");



    handler.setInputAction(function (click) {

      const earthPosition = viewer.scene.pickPosition(click.position);



      if (!Cesium.defined(earthPosition)) {

        coordTextEl.textContent = "No position detected â€“ try another point.";

        return;

      }



      const cartographic = Cesium.Cartographic.fromCartesian(earthPosition);



      // è½‰æˆ Decimal Degrees

      const lat = Cesium.Math.toDegrees(cartographic.latitude);

      const lon = Cesium.Math.toDegrees(cartographic.longitude);



      // ä¿ç•™ 6 ä½å°æ•¸

      const latStr = lat.toFixed(6);

      const lonStr = lon.toFixed(6);



      coordTextEl.textContent = `Lat: ${latStr}Â°, Lon: ${lonStr}Â°`;



      // ğŸ‘‰ é€™è£¡ä¹‹å¾Œå¯ä»¥æ”¹æˆï¼š

      //   1. ç”¨ postMessage æŠŠåº§æ¨™å‚³å›å¤–å±¤é é¢ï¼ˆiframe çˆ¶é ï¼‰

      //   2. ç›´æ¥å‘¼å« Born to Meet / ShapeDiver çš„ JavaScript

      console.log("Selected coordinates:", latStr, lonStr);

    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

  </script>

</body>

</html>
